# ğŸš€ GuÃ­a de Despliegue - Sistema de Emergencias Villa Allende

## ğŸ“‹ Lista de VerificaciÃ³n Pre-Despliegue

### âœ… Requisitos del Sistema

**Hardware MÃ­nimo:**
- âœ… Procesador: Intel Core i3 o AMD Ryzen 3 (2.0 GHz+)
- âœ… RAM: 4 GB mÃ­nimo (8 GB recomendado)
- âœ… Almacenamiento: 2 GB libres (SSD recomendado)
- âœ… Pantalla: 1366x768 mÃ­nimo (1920x1080 recomendado)

**Software Base:**
- âœ… Windows 10/11 (64-bit) o Linux Ubuntu 20.04+
- âœ… Python 3.8+ (si instalaciÃ³n desde cÃ³digo fuente)
- âœ… ConexiÃ³n a Internet estable
- âœ… Navegador web moderno (para mapas)

**Conectividad:**
- âœ… Internet para API WhatsApp
- âœ… Acceso a Google Maps
- âœ… Puertos de red: 80, 443 (salida)

### âœ… ConfiguraciÃ³n Previa

**Datos Organizacionales:**
- âœ… NÃºmeros de telÃ©fono WhatsApp de cada servicio
- âœ… Lista de barrios actualizada
- âœ… Credenciales API WhatsApp (Nubelix)
- âœ… Lista de mÃ³viles disponibles
- âœ… Personal operativo y sus roles

**ConfiguraciÃ³n de Red:**
- âœ… Firewall configurado para permitir conexiones salientes
- âœ… Proxy corporativo configurado (si aplica)
- âœ… DNS funcionando correctamente

## ğŸ¯ MÃ©todos de Despliegue

### MÃ©todo 1: InstalaciÃ³n Ejecutable (Recomendado para ProducciÃ³n)

```bash
# 1. Descargar el paquete de instalaciÃ³n
SistemaEmergenciasVillaAllende_v1.0.0_YYYYMMDD.zip

# 2. Extraer en directorio final
# Ejemplo: C:\SistemaEmergencias\ (Windows)
# Ejemplo: /opt/emergencias/ (Linux)

# 3. Ejecutar directamente
SistemaEmergenciasVillaAllende.exe

# 4. Configurar en primer uso
# - Usuario admin inicial
# - NÃºmeros WhatsApp
# - ConfiguraciÃ³n bÃ¡sica
```

### MÃ©todo 2: InstalaciÃ³n desde CÃ³digo Fuente (Desarrollo/PersonalizaciÃ³n)

```bash
# 1. Clonar o descargar cÃ³digo fuente
git clone [repositorio] sistema-emergencias
cd sistema-emergencias

# 2. Ejecutar instalador automÃ¡tico
python installer.py

# 3. Seguir instrucciones del instalador
# - InstalaciÃ³n de dependencias
# - ConfiguraciÃ³n inicial
# - Datos base

# 4. Iniciar sistema
python main.py
# o usar script generado:
# Windows: iniciar_sistema.bat
# Linux: ./iniciar_sistema.sh
```

### MÃ©todo 3: InstalaciÃ³n Manual (Control Total)

```bash
# 1. Crear entorno virtual
python -m venv venv

# 2. Activar entorno
# Windows:
venv\Scripts\activate
# Linux/macOS:
source venv/bin/activate

# 3. Instalar dependencias bÃ¡sicas
pip install customtkinter requests pandas openpyxl

# 4. Crear estructura de directorios
mkdir data logs exports backups temp

# 5. Configurar base de datos
python -c "from database.db_manager import DatabaseManager; DatabaseManager()"

# 6. Ejecutar sistema
python main.py
```

## âš™ï¸ ConfiguraciÃ³n Post-InstalaciÃ³n

### 1. ConfiguraciÃ³n Inicial del Sistema

```bash
# Primer login:
Usuario: admin
ContraseÃ±a: admin123 (cambiar inmediatamente)
```

**Pasos obligatorios:**
1. **Cambiar contraseÃ±a admin** (GestiÃ³n de Usuarios â†’ Editar admin)
2. **Configurar informaciÃ³n organizacional** (ConfiguraciÃ³n â†’ Sistema)
3. **Configurar nÃºmeros WhatsApp** (ConfiguraciÃ³n â†’ WhatsApp)
4. **Crear usuarios operativos** (GestiÃ³n de Usuarios â†’ Nuevo)
5. **Configurar mÃ³viles** (GestiÃ³n de MÃ³viles â†’ Nuevo)

### 2. ConfiguraciÃ³n WhatsApp

**API Nubelix - ConfiguraciÃ³n:**
```
URL: https://bot.nubelix.com/wabot/50aa4db2d5d872b6878edfe7755f194d
Token: e0072338d75f46d992f0430ffea2d154
```

**NÃºmeros requeridos:**
- ğŸ“± **DEMVA**: [nÃºmero de DEMVA con cÃ³digo paÃ­s]
- ğŸ“± **CEC**: [nÃºmero de CEC con cÃ³digo paÃ­s]
- ğŸ“± **Bomberos**: [nÃºmero de Bomberos con cÃ³digo paÃ­s]
- ğŸ“± **Defensa Civil**: [nÃºmero de Defensa Civil con cÃ³digo paÃ­s]
- ğŸ“± **Seguridad**: [nÃºmero de Seguridad con cÃ³digo paÃ­s]

**Formato de nÃºmeros:**
```
Formato correcto: 5493516789012 (cÃ³digo paÃ­s + Ã¡rea + nÃºmero)
Ejemplo Villa Allende: 549351XXXXXXX
```

### 3. ConfiguraciÃ³n de MÃ³viles

**Tipos disponibles:**
- ğŸš‘ **Ambulancia**: Para emergencias mÃ©dicas
- ğŸš” **Patrulla**: Para seguridad ciudadana  
- ğŸš’ **Rescate**: Para defensa civil y rescates

**Datos necesarios por mÃ³vil:**
- NÃºmero identificatorio (ej: AMB001, PAT001)
- Tipo de mÃ³vil
- Patente del vehÃ­culo
- Modelo y aÃ±o
- Estado inicial (disponible)
- UbicaciÃ³n base

### 4. GestiÃ³n de Usuarios

**Roles del sistema:**
- ğŸ‘‘ **Administrador**: Acceso total, gestiÃ³n de usuarios
- ğŸ‘¨â€ğŸ’¼ **Supervisor**: GestiÃ³n operativa, reportes, configuraciÃ³n
- ğŸ‘¨â€ğŸ’» **Operador**: Registro de llamadas, triaje, consultas

**Datos requeridos por usuario:**
- Nombre de usuario Ãºnico
- ContraseÃ±a segura (mÃ­n. 6 caracteres)
- Nombre completo
- Rol asignado
- TelÃ©fono y email (opcional)

## ğŸ”’ ConfiguraciÃ³n de Seguridad

### Seguridad de Acceso

```bash
# 1. ConfiguraciÃ³n de sesiones (ConfiguraciÃ³n â†’ Seguridad)
Timeout de sesiÃ³n: 480 minutos (8 horas) recomendado
MÃ¡x. intentos de login: 5
Tiempo de bloqueo: 30 minutos

# 2. PolÃ­ticas de contraseÃ±as
MÃ­nimo 6 caracteres
Cambio obligatorio en primer acceso
No reutilizar contraseÃ±as anteriores
```

### Backup y Respaldo

```bash
# ConfiguraciÃ³n de backup automÃ¡tico
Intervalo: 24 horas (recomendado)
Directorio: ./backups/ (o ruta externa)
RetenciÃ³n: 30 dÃ­as mÃ­nimo

# Backup manual
ConfiguraciÃ³n â†’ Backup â†’ "Backup Ahora"
```

### Logs del Sistema

```bash
# ConfiguraciÃ³n de logging
Nivel: INFO (producciÃ³n) / DEBUG (desarrollo)
RetenciÃ³n: 30 dÃ­as
TamaÃ±o mÃ¡x. archivo: 10 MB
RotaciÃ³n: AutomÃ¡tica

# UbicaciÃ³n de logs
./logs/app_YYYYMMDD.log      # Log general
./logs/errors_YYYYMMDD.log   # Solo errores
./logs/emergency_YYYYMMDD.log # Emergencias especÃ­ficas
```

## ğŸ“Š ConfiguraciÃ³n de Reportes

### Directorio de ExportaciÃ³n

```bash
# Configurar directorio de reportes
Ruta: ./exports/ (o ruta externa compartida)
Formato por defecto: Excel (.xlsx)
Incluir logo: SÃ­ (configurar logo organizacional)
Pie de pÃ¡gina: SÃ­
```

### Tipos de Reportes Disponibles

- ğŸ“… **Diario**: Actividad del dÃ­a actual
- ğŸ“Š **Semanal**: Resumen Ãºltimos 7 dÃ­as
- ğŸ“ˆ **Mensual**: EstadÃ­sticas del mes
- ğŸš¨ **Por Emergencia**: AnÃ¡lisis por tipo
- ğŸ‘¥ **Usuarios**: Actividad del personal
- ğŸš— **MÃ³viles**: Uso y disponibilidad
- ğŸ”§ **Personalizado**: Fechas y filtros especÃ­ficos

## ğŸŒ ConfiguraciÃ³n de Red

### Firewall y Puertos

```bash
# Puertos salientes requeridos:
80/TCP   - HTTP (Google Maps, actualizaciones)
443/TCP  - HTTPS (WhatsApp API, mapas seguros)

# Dominios a permitir:
*.google.com           # Google Maps
bot.nubelix.com        # WhatsApp API
maps.googleapis.com    # API de mapas
```

### Proxy Corporativo

```bash
# Si hay proxy corporativo, configurar en:
# ConfiguraciÃ³n â†’ Red â†’ Proxy (funciÃ³n futura)
# Por ahora: configurar variables de entorno del sistema

export HTTP_PROXY=http://proxy.empresa.com:8080
export HTTPS_PROXY=http://proxy.empresa.com:8080
```

## ğŸ”„ Proceso de ActualizaciÃ³n

### ActualizaciÃ³n del Sistema

```bash
# 1. Crear backup completo
ConfiguraciÃ³n â†’ Backup â†’ "Backup Ahora"

# 2. Descargar nueva versiÃ³n
[Nueva versiÃ³n del sistema]

# 3. Parar sistema actual
Cerrar todas las ventanas del sistema

# 4. Reemplazar archivos
Mantener directorios: data/, logs/, exports/, backups/
Reemplazar: main.py, database/, gui/, utils/

# 5. Ejecutar migraciÃ³n (si necesaria)
python migrate.py

# 6. Iniciar nueva versiÃ³n
python main.py
```

### MigraciÃ³n de Datos

```bash
# En caso de cambios en base de datos
# El sistema detecta automÃ¡ticamente la versiÃ³n
# y ejecuta migraciones necesarias
```

## ğŸ› SoluciÃ³n de Problemas de Despliegue

### Problemas Comunes

**Error: "ModuleNotFoundError: No module named 'customtkinter'"**
```bash
# SoluciÃ³n:
pip install customtkinter --upgrade
```

**Error: "sqlite3.OperationalError: database is locked"**
```bash
# SoluciÃ³n:
1. Cerrar todas las instancias del programa
2. Verificar que no hay procesos Python ejecutÃ¡ndose
3. Reiniciar si es necesario
4. Verificar permisos de escritura en directorio data/
```

**Error: "WhatsApp connection failed"**
```bash
# Verificaciones:
1. ConexiÃ³n a internet activa
2. Firewall permite conexiones salientes puerto 443
3. Credenciales API correctas
4. Formato de nÃºmeros correcto (con cÃ³digo paÃ­s)
```

**Error: "Permission denied" en Linux**
```bash
# SoluciÃ³n:
sudo chmod -R 755 /ruta/al/sistema/
sudo chown -R usuario:grupo /ruta/al/sistema/
```

### Logs de DiagnÃ³stico

```bash
# Revisar logs para diagnÃ³stico
./logs/app_YYYYMMDD.log      # Actividad general
./logs/errors_YYYYMMDD.log   # Errores del sistema

# Buscar errores especÃ­ficos
grep ERROR ./logs/*.log
grep CRITICAL ./logs/*.log
```

## ğŸ“ Soporte Post-Despliegue

### Contactos de Soporte

**Soporte TÃ©cnico:**
- ğŸ“§ Email: soporte@emergenciasvallende.gov.ar
- ğŸ“ TelÃ©fono: 3543-498000 (horario de oficina)
- ğŸ’¬ WhatsApp: [nÃºmero de soporte tÃ©cnico]

**EscalaciÃ³n:**
- ğŸ”§ Nivel 1: Operadores locales
- ğŸ”§ Nivel 2: Supervisores del sistema  
- ğŸ”§ Nivel 3: Desarrolladores del sistema

### DocumentaciÃ³n Adicional

- ğŸ“– **Manual de Usuario**: ./docs/manual_usuario.pdf
- ğŸ“– **Manual TÃ©cnico**: ./docs/manual_tecnico.pdf
- ğŸ¥ **Videos Tutoriales**: [enlaces a videos]
- â“ **FAQ**: ./docs/faq.md

### CapacitaciÃ³n Recomendada

**Personal Operativo (2-4 horas):**
- NavegaciÃ³n del sistema
- Registro de llamadas
- Proceso de triaje
- GestiÃ³n bÃ¡sica de mÃ³viles

**Supervisores (4-6 horas):**
- GestiÃ³n completa del sistema
- ConfiguraciÃ³n avanzada
- Reportes y estadÃ­sticas
- SoluciÃ³n de problemas bÃ¡sicos

**Administradores (6-8 horas):**
- ConfiguraciÃ³n completa
- GestiÃ³n de usuarios
- Backup y restauraciÃ³n
- Mantenimiento del sistema

## âœ… Checklist de Despliegue Completo

### Pre-Despliegue
- [ ] Hardware verificado y compatible
- [ ] Software base instalado
- [ ] Conectividad de red confirmada
- [ ] Credenciales WhatsApp obtenidas
- [ ] Datos organizacionales recopilados

### InstalaciÃ³n
- [ ] Sistema instalado correctamente
- [ ] Base de datos inicializada
- [ ] Estructura de directorios creada
- [ ] Dependencias instaladas

### ConfiguraciÃ³n
- [ ] Usuario admin configurado
- [ ] InformaciÃ³n organizacional ingresada
- [ ] NÃºmeros WhatsApp configurados y probados
- [ ] Usuarios operativos creados
- [ ] MÃ³viles registrados en el sistema
- [ ] Barrios actualizados

### Pruebas
- [ ] Login de todos los usuarios verificado
- [ ] Registro de llamada de prueba exitoso
- [ ] Triaje de cada tipo funcionando
- [ ] EnvÃ­o WhatsApp de prueba exitoso
- [ ] Backup manual realizado
- [ ] Reportes generados correctamente

### CapacitaciÃ³n
- [ ] Personal operativo capacitado
- [ ] Supervisores entrenados
- [ ] Administradores formados
- [ ] DocumentaciÃ³n entregada

### Puesta en ProducciÃ³n
- [ ] Sistema en producciÃ³n funcionando
- [ ] Monitoreo activo
- [ ] Soporte tÃ©cnico disponible
- [ ] Plan de contingencia definido

---

## ğŸ‰ Â¡Despliegue Completado!

Una vez completado este checklist, el Sistema de Emergencias Villa Allende estarÃ¡ completamente operativo y listo para salvar vidas en la comunidad.

**Â¡Que tengan un despliegue exitoso! ğŸš¨ğŸ‘¨â€âš•ï¸ğŸ‘©â€ğŸš’ğŸ‘®â€â™‚ï¸**

---

*Documento actualizado: Diciembre 2024*  
*VersiÃ³n del sistema: 1.0.0*  
*Contacto: soporte@emergenciasvallende.gov.ar*
